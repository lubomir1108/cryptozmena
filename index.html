<!DOCTYPE html>
<html lang="sk">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Odkaz pre ƒæudstvo ‚Äî Kapsula ƒåasu v. 7.0 (Limitovan√° Ed√≠cia)</title>
<meta name="description" content="Zanechaj vetu pre bud√∫ce gener√°cie. Prv√Ωch 5 odkazov denne je ZLAT√ùCH ZADARMO!">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;500;700;900&display=swap" rel="stylesheet">
<style>
  :root{
    --bg1:#020617; --bg2:#071427; --card:#0f1b2a; --accent:#7c3aed; --accent2:#06b6d4;
    --muted:#9aa4b2; --good:#7ef0c7; --danger:#ff8a8a; --round:14px; --text:#e6eef8;
    --gold:#FFD700; --gold-dark:#e6c400;
    --delete-limit:rgba(255,138,138,0.2);
    --cta-bg:rgba(124,58,237,0.95);
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:Inter,system-ui,Arial;background:radial-gradient(ellipse at 10% 10%, rgba(124,58,237,0.12), transparent 10%), linear-gradient(180deg,var(--bg1),var(--bg2));color:var(--text);min-height:100vh; padding-bottom: 70px;}
  .wrap{max-width:1100px;margin:0 auto;padding:20px}
  /* ... (OSTATN√â Z√ÅKLADN√â ≈†T√ùLY) ... */
  header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:18px}
  .brand{display:flex;align-items:center;gap:12px}
  .logo{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--accent2));display:flex;align-items:center;justify-content:center;font-weight:700;color:white;font-size:18px}
  h1{margin:0;font-size:20px}
  .subtitle{color:var(--muted);font-size:13px}
  .lang{display:flex;gap:8px}
  .lang button{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted);padding:8px 10px;border-radius:8px;cursor:pointer}
  .lang button.active{border-color:var(--accent);color:white;box-shadow:0 8px 30px rgba(124,58,237,0.06)}
  .grid{display:grid;grid-template-columns:1fr 360px;gap:18px}
  @media(max-width:960px){.grid{grid-template-columns:1fr}}
  .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:16px;border-radius:var(--round)}
  label{font-size:13px;color:var(--muted)}
  input[type="text"], textarea, select{width:100%;padding:10px;border-radius:10px;border:0;background:rgba(255,255,255,0.02);color:var(--text);margin-top:8px}
  textarea{min-height:90px}
  .controls{display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-top:10px}
  .btn{background:linear-gradient(90deg,var(--accent),var(--accent2));color:white;border:0;padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:600;}
  .ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted);padding:10px 14px;border-radius:10px;cursor:pointer}
  .list{margin-top:12px;display:flex;flex-direction:column;gap:10px;max-height:600px;overflow:auto}
  .item{padding:12px;border-radius:10px;background:rgba(255,255,255,0.02);display:flex;gap:12px;align-items:flex-start;justify-content:space-between;border:1px solid transparent;transition:all 0.3s;}
  .item:hover{background:rgba(255,255,255,0.04)}
  .meta{color:var(--muted);font-size:13px}
  .highlight-paid{
    background:linear-gradient(180deg, rgba(255,215,0,0.07), rgba(255,215,0,0.03)) !important;
    border-color:var(--gold);
    box-shadow:0 0 0 2px var(--gold), 0 15px 40px rgba(255,215,0,0.15);
  }
  .tag-paid{background:linear-gradient(90deg,#ffd166,#ff9f1c);color:#111;padding:4px 8px;border-radius:6px;font-weight:700;margin-left:8px;font-size:12px;letter-spacing:0.5px;}
  .small{font-size:13px;color:var(--muted)}
  footer{margin-top:18px;color:var(--muted);font-size:13px;text-align:center}
  .avatar {width:56px;height:56px;border-radius:10px;object-fit:cover;background:#111}
  .char-count {float:right;font-size:12px;color:var(--muted)}
  .hero {
    display:flex;align-items:center;gap:12px;padding:16px;border-radius:var(--round);margin-bottom:12px;
    background:linear-gradient(90deg,var(--accent),var(--accent2));
    color:white;
    position:relative;
    overflow:hidden;
  }
  .hero-text {z-index:1}
  .capsule-anim {
    position:absolute;right:0;top:-10px;opacity:0.2;
    font-size:100px;
    transform:rotate(-15deg);
    animation:pulse-float 6s infinite ease-in-out;
    z-index:0;
  }
  @keyframes pulse-float {
    0% {transform:translateY(0) scale(1) rotate(-15deg); opacity:0.15;}
    50% {transform:translateY(-10px) scale(1.05) rotate(-15deg); opacity:0.25;}
    100% {transform:translateY(0) scale(1) rotate(-15deg); opacity:0.15;}
  }
  .time-limit {
    font-weight:600;
    color:var(--danger);
    background-color:var(--delete-limit);
    padding:3px 6px;
    border-radius:4px;
    font-size:11px;
    margin-left:8px;
  }
  /* VIZU√ÅLNA DEGRAD√ÅCIA NEPLATEN√âHO ODKAZU */
  .item.temporary {
    border-left:4px solid var(--danger);
    opacity:0.6;
    filter: blur(1.0px);
    transition: all 0.5s;
  }
  .item.temporary:hover {
    opacity: 0.9;
    filter: blur(0.2px);
  }

  /* STICKY CTA FOOTER */
  .sticky-cta {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    background: var(--cta-bg);
    box-shadow: 0 -4px 15px rgba(0,0,0,0.3);
    padding: 10px 20px;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 20px;
    z-index: 1000;
    backdrop-filter: blur(8px);
    border-top: 1px solid rgba(255,255,255,0.1);
  }
  .sticky-cta .btn {
    font-size: 16px;
    padding: 12px 20px;
    background: linear-gradient(90deg, var(--gold-dark), var(--gold));
    color: #111;
    font-weight: 900;
    text-transform: uppercase;
    animation: bounce-gold 3s infinite ease-in-out;
  }
  @keyframes bounce-gold {
    0%, 100% { transform: translateY(0); box-shadow: 0 0 15px rgba(255,215,0,0.4); }
    50% { transform: translateY(-4px); box-shadow: 0 6px 20px rgba(255,215,0,0.7); }
  }
  .cta-text {
    font-size: 14px;
    font-weight: 500;
    color: white;
    text-shadow: 0 1px 2px rgba(0,0,0,0.5);
  }
  @media(max-width:600px){
    .sticky-cta {flex-direction: column; gap: 8px; padding: 8px 10px;}
    .sticky-cta .btn {width: 100%;}
    .cta-text {font-size: 12px;}
  }

  /* VYLEP≈†EN√â TLAƒåIDLO V FORMUL√ÅRI */
  #payLinkBtn {
    flex-grow: 1;
    font-size: 18px !important;
    padding: 14px 20px !important;
  }
  /* UPOZORNENIE NA LIMIT */
  .limit-info {
    font-size: 14px;
    font-weight: 700;
    color: var(--gold);
    padding: 8px;
    text-align: center;
    border: 1px dashed var(--gold);
    border-radius: 8px;
    margin-bottom: 12px;
  }

</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo">OPƒΩ</div>
        <div>
          <h1 id="title">Odkaz pre ƒæudstvo</h1>
          <div id="subtitle" class="subtitle">Digit√°lna Kapsula ƒåasu v. 7.0 | Limitovan√° Ed√≠cia</div>
        </div>
      </div>
      <div style="display:flex;gap:8px;align-items:center">
        <div class="lang">
          <button data-lang="sk" class="lang-btn active">SK</button>
          <button data-lang="en" class="lang-btn">EN</button>
          <button data-lang="de" class="lang-btn">DE</button>
          <button data-lang="cs" class="lang-btn">CZ</button>
        </div>
      </div>
    </header>

    <div class="hero">
        <span class="capsule-anim">‚è≥</span>
        <div class="hero-text">
            <div style="font-size:24px; font-weight:900; line-height:1.2;">TVOJ ODKAZ PRE BUD√öCNOS≈§</div>
            <div style="margin-top:8px;">
                <span style="font-weight:700">DOƒåASN√ù (Zdarma):</span> **Rizikov√©** - Zost√°va len 48 hod√≠n.
            </div>
            <div style="margin-top:4px;">
                <span style="font-weight:700; color:var(--gold)">ZLAT√ù (1‚Ç¨ / Limitovan√Ω Zdarma):</span> **Exkluz√≠vne Trval√© ulo≈æenie** & prioritn√Ω status.
            </div>
        </div>
    </div>

    <div class="grid">
      <main>
        <div class="card">
          <h3 id="formTitle">Prida≈• odkaz a zvoli≈• trv√°cnos≈•</h3>
          
          <div id="dailyLimitInfo" class="limit-info"></div>

          <label id="labelName">Meno / Prez√Ωvka (voliteƒæn√©)</label>
          <input id="author" type="text" placeholder="" />

          <label id="labelMessage" style="margin-top:12px">Odkaz (max 300 znakov) <span id="charCount" class="char-count">0/300</span></label>
          <textarea id="message" maxlength="300" placeholder=""></textarea>

          <div style="margin-top:10px; padding:12px; background:rgba(255,255,255,0.03); border-radius:10px; border:1px solid var(--gold-dark);">
            <div style="font-weight:700; color:var(--gold); margin-bottom:8px;">MO≈ΩNOSTI ULO≈ΩENIA:</div>
            <div class="controls" style="margin-top:0;">
                <button id="payLinkBtn" class="btn" style="background:linear-gradient(90deg, var(--gold-dark), var(--gold)); color: #111;">
                    üîí ZAPLA≈§ 1‚Ç¨ ‚Äî ZLAT√ù Odkaz (Trval√© Ulo≈æenie)
                </button>
                <button id="saveFree" class="ghost">
                    Ulo≈æi≈• DOƒåASNE (48 hod√≠n)
                </button>
            </div>
          </div>
          <div class="small" style="margin-top:10px; color:var(--danger); font-weight:700;">
            *Neplaten√© odkazy sa po 48 hodin√°ch bez milosti vyma≈æ√∫! Zabezpeƒç si trvalos≈•!
          </div>


          <div style="margin-top:20px">
            <label id="labelSearch">Hƒæada≈• a triedi≈• odkazy</label>
            <div style="display:flex;gap:8px;margin-top:8px">
              <input id="search" type="text" placeholder="">
              <select id="sort">
                <option value="paid">ZLAT√â Odkazy najprv</option>
                <option value="new">Najnov≈°ie</option>
                <option value="likes">Najviac lajkovan√©</option>
                <option value="views">Najviac ƒç√≠tan√©</option>
                <option value="old">Najstar≈°ie</option>
                <option value="random">N√°hodn√©</option>
              </select>
            </div>
          </div>
        </div>

        <div class="card" style="margin-top:12px">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <h3 id="listTitle">Zoznam odkazov</h3>
            <div class="small" id="count">0 odkazov</div>
          </div>
          <div id="list" class="list" style="margin-top:10px">
            <div class="small">≈Ωiadne odkazy</div>
          </div>
        </div>
      </main>

      <aside>
        <div class="card">
          <h3 id="statsTitle">≈†tatistiky Kapsuly ƒåasu</h3>
          <div class="small" style="margin-top:8px">Celkom odkazov: <strong id="statTotal">0</strong></div>
          <div class="small">Trvalo ulo≈æen√Ωch (ZLAT√ùCH): <strong id="statPaid" style="color:var(--gold);font-weight:700">0</strong></div>
          <div class="small">Doƒçasn√Ωch odkazov (vypr≈°√≠): <strong id="statTemporary" style="color:var(--danger);font-weight:700">0</strong></div>
          <div class="small">Celkom zobrazen√≠: <strong id="statViews">0</strong></div>
          <div class="small">Celkom lajkov: <strong id="statLikes">0</strong></div>
        </div>

        <div class="card" style="margin-top:12px">
          <h3 id="topTitle">Najpopul√°rnej≈°ie odkazy</h3>
          <div id="topList" style="display:flex;flex-direction:column;gap:8px;margin-top:8px"></div>
        </div>

        <div class="card" style="margin-top:12px">
          <h3 id="helpTitle">NEPR√çƒé O SVOJU HODNOS≈§!</h3>
          <div class="small" id="helpText">
            Ka≈æd√Ω odkaz m√° unik√°tnu Hodnos≈• (#). <br>
            <strong style="color:var(--danger)">Doƒçasn√Ω odkaz</strong> m√° platnos≈• len 48 hod√≠n. Ak nezaplat√≠≈° 1 ‚Ç¨, Tvoj odkaz sa vyma≈æe a Tvoja **Hodnos≈• prepadne NAV≈ΩDY**!
            <br><br>
            <strong style="color:var(--gold)">Zlat√Ω odkaz (1‚Ç¨ / Zdarma)</strong> sa stane trvalou s√∫ƒças≈•ou Kapsuly ƒåasu a zachov√° si Tvoju unik√°tnu Hodnos≈•, ktor√° sa s ka≈æd√Ωm pridan√Ωm odkazom st√°va **cennej≈°ou**!
          </div>
        </div>
      </aside>
    </div>

    <footer>¬© 2025 Odkaz pre ƒæudstvo ‚Äî Verzia 7.0 | Chytro, R√Ωchlo, Zlat√° Hodnos≈• za 1‚Ç¨!</footer>

  </div>

  <div class="sticky-cta" id="stickyCta">
    <div class="cta-text" id="ctaText">
      ‚åõ Posledn√° ≈°anca! Nenechaj svoj odkaz VYMAZA≈§! Zapla≈• 1‚Ç¨ a ulo≈æ ho NATRVALO!
    </div>
    <button id="stickyPayBtn" class="btn">
      UROB ODKAZ TRVAL√ù (1‚Ç¨)
    </button>
  </div>

<script>
/* -----------------------
   KON≈†TANTY A GLOB√ÅLNY STAV
   ----------------------- */
const TEMP_DURATION_MS = 48 * 60 * 60 * 1000;
const DELETE_INTERVAL_MS = 60 * 60 * 1000;
const DAILY_FREE_LIMIT = 5; // NOV√ù LIMIT!
const STORAGE_KEY = 'odkaz_pre_ludstvo_v7';
const DAILY_LIMIT_KEY = 'op_daily_free'; // Kƒæ√∫ƒç pre denn√Ω limit

// Denno-limitn√Ω stav
let dailyLimitState = loadDailyLimit();
let entries = loadEntries();

const I18N = {
  sk: {
    // ... (ostatn√© texty zostali z V6.0, menia sa len tie pre limit)
    saveFree: 'Ulo≈æi≈• DOƒåASNE (48 hod√≠n)',
    dailyLimitText: (remaining) => remaining > 0 
      ? `üéâ Zost√°va **${remaining} ZLAT√ùCH ODKAZOV ZDARMA** pre dne≈°ok! Chy≈• si svoj!`
      : `‚ö†Ô∏è Dne≈°n√Ω limit (${DAILY_FREE_LIMIT}) bol vyƒçerpan√Ω. Zlat√Ω odkaz je len za 1‚Ç¨!`,
    alertThanksFree: '√öspe≈°ne pridan√©! ZLAT√ù ODKAZ ZDARMA je trvalo ulo≈æen√Ω.',
    alertThanksTemporary: '√öspe≈°ne pridan√©! Doƒçasn√Ω odkaz bude akt√≠vny 48 hod√≠n.'
  },
  en: {
    // ...
    saveFree: 'Save TEMPORARILY (48 hours)',
    dailyLimitText: (remaining) => remaining > 0
      ? `üéâ **${remaining} GOLD MESSAGES LEFT FOR FREE** today! Grab yours!`
      : `‚ö†Ô∏è Today's limit (${DAILY_FREE_LIMIT}) has been reached. Get your Gold Message for just ‚Ç¨1!`,
    alertThanksFree: 'Successfully added! FREE GOLD MESSAGE permanently stored.',
    alertThanksTemporary: 'Successfully added! Temporary message will be active for 48 hours.'
  },
  de: {
    // ...
    saveFree: 'Vor√ºbergehend speichern (48 Stunden)',
    dailyLimitText: (remaining) => remaining > 0
      ? `üéâ **${remaining} GOLD-NACHRICHTEN KOSTENLOS** sind noch √ºbrig! Sichern Sie sich Ihre!`
      : `‚ö†Ô∏è Das heutige Limit (${DAILY_FREE_LIMIT}) ist erreicht. Gold-Nachricht nur f√ºr 1‚Ç¨!`,
    alertThanksFree: 'Erfolgreich hinzugef√ºgt! KOSTENLOSE GOLD-NACHRICHT dauerhaft gespeichert.',
    alertThanksTemporary: 'Erfolgreich hinzugef√ºgt! Vor√ºbergehende Nachricht ist 48 Stunden aktiv.'
  },
  cs: {
    // ...
    saveFree: 'Ulo≈æit DOƒåASNƒö (48 hodin)',
    dailyLimitText: (remaining) => remaining > 0
      ? `üéâ Zb√Ωv√° **${remaining} ZLAT√ùCH VZKAZ≈Æ ZDARMA** pro dne≈°ek! Rychle si uchovejte ten sv≈Øj!`
      : `‚ö†Ô∏è Dne≈°n√≠ limit (${DAILY_FREE_LIMIT}) byl vyƒçerp√°n. Zlat√Ω vzkaz je jen za 1‚Ç¨!`,
    alertThanksFree: '√öspƒõ≈°nƒõ p≈ôid√°no! ZLAT√ù VZKAZ ZDARMA je trvale ulo≈æen.',
    alertThanksTemporary: '√öspƒõ≈°nƒõ p≈ôid√°no! Doƒçasn√Ω vzkaz bude aktivn√≠ 48 hodin.'
  }
};


/* -----------------------
   LIMIT LOGIKA
   ----------------------- */
function loadDailyLimit() {
    try {
        const raw = localStorage.getItem(DAILY_LIMIT_KEY);
        const state = raw ? JSON.parse(raw) : { count: 0, date: now() };
        
        // Reset, ak uplynulo viac ako 24 hod√≠n (nov√Ω de≈à)
        const msPerDay = 24 * 60 * 60 * 1000;
        if (now() - state.date > msPerDay) {
            return { count: 0, date: now() }; // Reset
        }
        return state;
    } catch (e) {
        return { count: 0, date: now() };
    }
}
function saveDailyLimit() {
    localStorage.setItem(DAILY_LIMIT_KEY, JSON.stringify(dailyLimitState));
}
function useFreeSlot() {
    if (dailyLimitState.count < DAILY_FREE_LIMIT) {
        dailyLimitState.count++;
        dailyLimitState.date = now(); // Aktualiz√°cia d√°tumu posledn√©ho pou≈æitia (pre lep≈°iu kontrolu)
        saveDailyLimit();
        return true;
    }
    return false;
}
function getRemainingFreeSlots() {
    // Pre istotu skontrolujeme reset pred vr√°ten√≠m
    dailyLimitState = loadDailyLimit();
    return DAILY_FREE_LIMIT - dailyLimitState.count;
}


/* -----------------------
   Helpers & DOM refs
   ----------------------- */
const el = id => document.getElementById(id);
const langBtns = document.querySelectorAll('.lang-btn');
const authorEl = el('author');
const messageEl = el('message');
const payLinkBtn = el('payLinkBtn');
const saveFree = el('saveFree');
const dailyLimitInfoEl = el('dailyLimitInfo'); // NOV√ù PRVOK
const stickyPayBtn = el('stickyPayBtn');

let LANG = localStorage.getItem('op_lang') || 'sk';
applyLang(LANG);

/* -----------------------
   Utils (z V6.0)
   ----------------------- */
function uid(prefix='id'){ return prefix + Math.random().toString(36).slice(2,10); }
function now(){ return Date.now(); }
function getRemainingTime(ts){
    const remaining = (ts + TEMP_DURATION_MS) - now();
    if(remaining <= 0) return null;
    const h = Math.floor(remaining / (1000 * 60 * 60));
    const m = Math.floor((remaining % (1000 * 60 * 60)) / (1000 * 60));
    if(h > 0) return `${h}h ${m}m`;
    return `${m}m`;
}
function formatDate(ts){ return new Date(ts).toLocaleDateString(LANG, {year:'numeric',month:'short',day:'numeric'}); }
function escapeHtml(s){ return String(s).replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&quot;',"'":'&#39;'})[c]); }
function truncate(s,n){ return s.length>n ? s.slice(0,n-1)+'‚Ä¶' : s; }

function simulateTranslation(text, targetLang) {
    if (targetLang === 'sk') return text;
    let emoji = '';
    let langName = '';
    if (targetLang === 'en') { emoji = 'üåç'; langName = 'ENG'; }
    else if (targetLang === 'de') { emoji = 'üè∞'; langName = 'DEU'; }
    else if (targetLang === 'cs') { emoji = 'üç∫'; langName = 'CZE'; }
    return `<span style="color:var(--muted); font-size:12px">${emoji} (${langName}) </span>` + text;
}


/* -----------------------
   Perzistencia (z V6.0)
   ----------------------- */
function loadEntries(){
  try{
    const raw = localStorage.getItem(STORAGE_KEY);
    let loaded = raw ? JSON.parse(raw) : [];
    const filtered = loaded.filter(e => e.paid || (e.ts + TEMP_DURATION_MS > now()));
    if(filtered.length !== loaded.length) {
        entries = filtered;
        saveEntries();
    }
    return filtered;
  }catch(e){ console.error(e); return []; }
}
function saveEntries(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(entries)); }
setInterval(loadEntries, DELETE_INTERVAL_MS);


/* -----------------------
   i18n & UI (Aktualiz√°cia textov a limitu)
   ----------------------- */
function applyLang(lang){
  LANG = lang;
  localStorage.setItem('op_lang', lang);
  const T = I18N[lang];
  
  // Aktualiz√°cia limitu
  const remaining = getRemainingFreeSlots();
  dailyLimitInfoEl.innerHTML = T.dailyLimitText(remaining).replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
  
  // Vizu√°lne √∫pravy tlaƒçidiel
  payLinkBtn.disabled = false;
  saveFree.disabled = false;
  if (remaining > 0) {
      saveFree.textContent = `Ulo≈æi≈• ZDARMA A TRVALO! (${remaining} ost√°va)`;
      saveFree.style.background = 'linear-gradient(90deg, #10b981, #06b6d4)';
      saveFree.style.color = 'white';
      saveFree.classList.remove('ghost');
  } else {
      saveFree.textContent = T.saveFree;
      saveFree.style.background = '';
      saveFree.style.color = 'var(--muted)';
      saveFree.classList.add('ghost');
  }

  // ... (ostatn√© texty UI)
  el('title').textContent = T.title;
  el('subtitle').textContent = T.subtitle;
  // ... (a ƒèal≈°ie texty)
  stickyPayBtn.textContent = T.ctaStickyBtn;
  el('message').placeholder = T.placeholderMsg;
  
  document.querySelectorAll('.lang-btn').forEach(b=>b.classList.toggle('active', b.dataset.lang===lang));
  render();
}
document.querySelectorAll('.lang-btn').forEach(b=> b.addEventListener('click', ()=> applyLang(b.dataset.lang)));
el('message').addEventListener('input', ()=> el('charCount').textContent = `${el('message').value.length}/300`);


/* -----------------------
   Render & UI (z V6.0)
   ----------------------- */
function render(){
  // ... (render logika, filter, sort, ≈°tatistiky) ...
  // Pou≈æ√≠vam len render pre zjednodu≈°enie, v re√°lnom k√≥de by bolo cel√© telo render() funkcie

  const T = I18N[LANG];
  
  // Update CTA pri ka≈ædom renderi, pre zmenu limitu
  applyLang(LANG); 

  // Simul√°cia prekreslenia zoznamu
  const listEl = el('list');
  listEl.innerHTML = ''; // Vymaza≈• pre op√§tovn√© vykreslenie
  if(entries.length===0){
    listEl.innerHTML = `<div class="small">${T.noResults}</div>`;
  } else {
    entries.slice(0, 10).forEach(e => { // Len prv√Ωch 10 pre r√Ωchlos≈• uk√°≈æky
        const isTemporary = !e.paid;
        let displayedText = escapeHtml(e.text);
        if (LANG !== 'sk' && isTemporary) {
            displayedText = simulateTranslation(displayedText, LANG);
        } else if (LANG !== 'sk' && e.paid) {
             displayedText = `<span style="color:var(--gold); font-size:12px">ü•á (Original Text) </span>` + displayedText;
        }

        const item = document.createElement('div');
        item.className = 'item' + (e.paid ? ' highlight-paid' : '') + (isTemporary ? ' temporary' : '');
        item.innerHTML = `<div style="flex:1">${displayedText}</div>`;
        listEl.appendChild(item);
    });
  }
}


/* -----------------------
   Actions & Payment (√öprava pre limit)
   ----------------------- */
function addEntry(asPaid, isFreeSlot = false){
  const T = I18N[LANG];
  const author = authorEl.value.trim() || null;
  const text = messageEl.value.trim();

  if(!text) return alert(T.alertMessage);
  if(text.length>300) return alert(T.alertMaxChars);

  const entry = {
    id: uid('o_'),
    author,
    text,
    ts: now(),
    likes: 0,
    views: 0,
    paid: Boolean(asPaid || isFreeSlot), // Ak je zaplaten√© ALEBO je free slot
    avatar: 'https://picsum.photos/56?random=' + Math.floor(Math.random()*10000)
  };
  entries.unshift(entry);
  saveEntries(); render();
  authorEl.value=''; messageEl.value=''; el('charCount').textContent = `0/300`;
  
  if (isFreeSlot) {
      alert(T.alertThanksFree);
  } else if (asPaid) {
      alert("Platba prebehla √∫spe≈°ne! " + T.alertThanksFree); // V re√°le by sa tu nealertovalo, ale presmerovalo
  } else {
      alert(T.alertThanksTemporary);
  }
}

const PAYMENT_LINK = ''; // Nahraƒète skutoƒçn√Ωm platobn√Ωm linkom
function handlePaymentAction(){
    // Toto je pre platobn√© tlaƒçidlo (1‚Ç¨)
    const T = I18N[LANG];
    if(!PAYMENT_LINK){
        if(confirm("PAYMENT LINK nie je nastaven√Ω. Simulova≈• ZLAT√ö platbu?")){
            addEntry(true);
        }
        return;
    }
    window.open(PAYMENT_LINK, '_blank');
    if(confirm("Po dokonƒçen√≠ platby stlaƒç OK.")){
        addEntry(true);
    } 
}

function handleFreeAction(){
    const remaining = getRemainingFreeSlots();
    if (remaining > 0) {
        // M√° n√°rok na zlat√Ω odkaz ZDARMA
        if (confirm(`GRATULUJEME! Patr√≠≈° medzi ${remaining}. Vyu≈æi≈• ZLAT√ù ODKAZ ZDARMA?`)) {
             useFreeSlot();
             addEntry(false, true); // Nie je platen√Ω, ale je freeSlot
        }
    } else {
        // U≈æ len doƒçasn√Ω
        if (confirm("Dnes u≈æ nem√°me ≈æiadne ZLAT√â ODKAZY ZDARMA. Ulo≈æi≈• len DOƒåASNE (48h)?")) {
            addEntry(false);
        }
    }
}


// Bindovanie na CTA tlaƒçidl√°
payLinkBtn.addEventListener('click', handlePaymentAction);
stickyPayBtn.addEventListener('click', handlePaymentAction);

// Bindovanie na ZDARMA/LIMIT tlaƒçidlo
saveFree.addEventListener('click', handleFreeAction);


/* -----------------------
   Init
   ----------------------- */
// Vyvolanie render na zaƒçiatku a periodicky
render();
setInterval(render, 10000); 
</script>
</body>
</html>
