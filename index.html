<!DOCTYPE html>
<html lang="sk">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Odkaz pre ƒæudstvo ‚Äî Kapsula ƒåasu v. 5.0 (Konverzia)</title>
<meta name="description" content="Zanechaj vetu pre bud√∫ce gener√°cie. Zlat√Ω Odkaz (1‚Ç¨) je trvalo ulo≈æen√Ω v Kapsule ƒåasu.">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;500;700;900&display=swap" rel="stylesheet">
<style>
  :root{
    --bg1:#020617; --bg2:#071427; --card:#0f1b2a; --accent:#7c3aed; --accent2:#06b6d4;
    --muted:#9aa4b2; --good:#7ef0c7; --danger:#ff8a8a; --round:14px; --text:#e6eef8;
    --gold:#FFD700; --gold-dark:#e6c400;
    --delete-limit:rgba(255,138,138,0.2);
    /* NOV√Å FARBA PRE CTA FOOTER */
    --cta-bg:rgba(124,58,237,0.95);
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:Inter,system-ui,Arial;background:radial-gradient(ellipse at 10% 10%, rgba(124,58,237,0.12), transparent 10%), linear-gradient(180deg,var(--bg1),var(--bg2));color:var(--text);min-height:100vh; padding-bottom: 70px; /* Priestor pre sticky footer */}
  .wrap{max-width:1100px;margin:0 auto;padding:20px}
  /* ... (OSTATN√â Z√ÅKLADN√â ≈†T√ùLY) ... */
  header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:18px}
  .brand{display:flex;align-items:center;gap:12px}
  .logo{width:56px;height:56px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--accent2));display:flex;align-items:center;justify-content:center;font-weight:700;color:white;font-size:18px}
  h1{margin:0;font-size:20px}
  .subtitle{color:var(--muted);font-size:13px}
  .lang{display:flex;gap:8px}
  .lang button{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted);padding:8px 10px;border-radius:8px;cursor:pointer}
  .lang button.active{border-color:var(--accent);color:white;box-shadow:0 8px 30px rgba(124,58,237,0.06)}
  .grid{display:grid;grid-template-columns:1fr 360px;gap:18px}
  @media(max-width:960px){.grid{grid-template-columns:1fr}}
  .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:16px;border-radius:var(--round)}
  label{font-size:13px;color:var(--muted)}
  input[type="text"], textarea, select{width:100%;padding:10px;border-radius:10px;border:0;background:rgba(255,255,255,0.02);color:var(--text);margin-top:8px}
  textarea{min-height:90px}
  .controls{display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-top:10px}
  .btn{background:linear-gradient(90deg,var(--accent),var(--accent2));color:white;border:0;padding:10px 14px;border-radius:10px;cursor:pointer;font-weight:600;}
  .ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted);padding:10px 14px;border-radius:10px;cursor:pointer}
  .list{margin-top:12px;display:flex;flex-direction:column;gap:10px;max-height:600px;overflow:auto}
  .item{padding:12px;border-radius:10px;background:rgba(255,255,255,0.02);display:flex;gap:12px;align-items:flex-start;justify-content:space-between;border:1px solid transparent;transition:all 0.3s;}
  .item:hover{background:rgba(255,255,255,0.04)}
  .meta{color:var(--muted);font-size:13px}
  .highlight-paid{
    background:linear-gradient(180deg, rgba(255,215,0,0.07), rgba(255,215,0,0.03)) !important;
    border-color:var(--gold);
    box-shadow:0 0 0 2px var(--gold), 0 15px 40px rgba(255,215,0,0.15);
  }
  .tag-paid{background:linear-gradient(90deg,#ffd166,#ff9f1c);color:#111;padding:4px 8px;border-radius:6px;font-weight:700;margin-left:8px;font-size:12px;letter-spacing:0.5px;}
  .small{font-size:13px;color:var(--muted)}
  footer{margin-top:18px;color:var(--muted);font-size:13px;text-align:center}
  .avatar {width:56px;height:56px;border-radius:10px;object-fit:cover;background:#111}
  .char-count {float:right;font-size:12px;color:var(--muted)}
  .hero {
    display:flex;align-items:center;gap:12px;padding:16px;border-radius:var(--round);margin-bottom:12px;
    background:linear-gradient(90deg,var(--accent),var(--accent2));
    color:white;
    position:relative;
    overflow:hidden;
  }
  .hero-text {z-index:1}
  .capsule-anim {
    position:absolute;right:0;top:-10px;opacity:0.2;
    font-size:100px;
    transform:rotate(-15deg);
    animation:pulse-float 6s infinite ease-in-out;
    z-index:0;
  }
  @keyframes pulse-float {
    0% {transform:translateY(0) scale(1) rotate(-15deg); opacity:0.15;}
    50% {transform:translateY(-10px) scale(1.05) rotate(-15deg); opacity:0.25;}
    100% {transform:translateY(0) scale(1) rotate(-15deg); opacity:0.15;}
  }
  .time-limit {
    font-weight:600;
    color:var(--danger);
    background-color:var(--delete-limit);
    padding:3px 6px;
    border-radius:4px;
    font-size:11px;
    margin-left:8px;
  }
  /* VIZU√ÅLNA DEGRAD√ÅCIA NEPLATEN√âHO ODKAZU */
  .item.temporary {
    border-left:4px solid var(--danger);
    opacity:0.6; /* Ni≈æ≈°ia priehƒæadnos≈• pre pocit straty */
    filter: blur(0.2px);
    transition: all 0.5s;
  }
  .item.temporary:hover {
    opacity: 0.9;
    filter: none;
  }

  /* -----------------------
     NOV√â: STICKY CTA FOOTER
     ----------------------- */
  .sticky-cta {
    position: fixed;
    bottom: 0;
    left: 0;
    width: 100%;
    background: var(--cta-bg);
    box-shadow: 0 -4px 15px rgba(0,0,0,0.3);
    padding: 10px 20px;
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 20px;
    z-index: 1000;
    backdrop-filter: blur(8px);
    border-top: 1px solid rgba(255,255,255,0.1);
  }
  .sticky-cta .btn {
    font-size: 16px;
    padding: 12px 20px;
    /* D√îLE≈ΩIT√â: Pou≈æi≈• zlat√© farby, aby to kriƒçalo! */
    background: linear-gradient(90deg, var(--gold-dark), var(--gold));
    color: #111;
    font-weight: 900;
    text-transform: uppercase;
    animation: bounce-gold 3s infinite ease-in-out;
  }
  @keyframes bounce-gold {
    0%, 100% { transform: translateY(0); box-shadow: 0 0 15px rgba(255,215,0,0.4); }
    50% { transform: translateY(-4px); box-shadow: 0 6px 20px rgba(255,215,0,0.7); }
  }
  .cta-text {
    font-size: 14px;
    font-weight: 500;
    color: white;
    text-shadow: 0 1px 2px rgba(0,0,0,0.5);
  }
  @media(max-width:600px){
    .sticky-cta {flex-direction: column; gap: 8px; padding: 8px 10px;}
    .sticky-cta .btn {width: 100%;}
    .cta-text {font-size: 12px;}
  }

  /* VYLEP≈†EN√â TLAƒåIDLO V FORMUL√ÅRI */
  #payLinkBtn {
    flex-grow: 1; /* Nech sa roztiahne, aby bolo dominantn√© */
    font-size: 18px !important;
    padding: 14px 20px !important;
  }

</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logo">OPƒΩ</div>
        <div>
          <h1 id="title">Odkaz pre ƒæudstvo</h1>
          <div id="subtitle" class="subtitle">Digit√°lna Kapsula ƒåasu v. 5.0</div>
        </div>
      </div>
      <div style="display:flex;gap:8px;align-items:center">
        <div class="lang">
          <button data-lang="sk" class="lang-btn active">SK</button>
          <button data-lang="en" class="lang-btn">EN</button>
          <button data-lang="de" class="lang-btn">DE</button>
        </div>
      </div>
    </header>

    <div class="hero">
        <span class="capsule-anim">‚è≥</span>
        <div class="hero-text">
            <div style="font-size:24px; font-weight:900; line-height:1.2;">TVOJ ODKAZ PRE BUD√öCNOS≈§</div>
            <div style="margin-top:8px;">
                <span style="font-weight:700">ZADARMO:</span> Zost√°va viditeƒæn√Ω 48 hod√≠n.
            </div>
            <div style="margin-top:4px;">
                <span style="font-weight:700">ZLAT√ù (1‚Ç¨):</span> **Trval√© ulo≈æenie** v Kapsule ƒåasu & prioritn√Ω status.
            </div>
        </div>
    </div>

    <div class="grid">
      <main>
        <div class="card">
          <h3 id="formTitle">Prida≈• odkaz a zvoli≈• trv√°cnos≈•</h3>

          <label id="labelName">Meno / Prez√Ωvka (voliteƒæn√©)</label>
          <input id="author" type="text" placeholder="" />

          <label id="labelMessage" style="margin-top:12px">Odkaz (max 300 znakov) <span id="charCount" class="char-count">0/300</span></label>
          <textarea id="message" maxlength="300" placeholder=""></textarea>

          <div style="margin-top:10px; padding:12px; background:rgba(255,255,255,0.03); border-radius:10px; border:1px solid var(--gold-dark);">
            <div style="font-weight:700; color:var(--gold); margin-bottom:8px;">MO≈ΩNOSTI ULO≈ΩENIA:</div>
            <div class="controls" style="margin-top:0;">
                <button id="payLinkBtn" class="btn" style="background:linear-gradient(90deg, var(--gold-dark), var(--gold)); color: #111;">
                    üîí ZAPLA≈§ 1‚Ç¨ ‚Äî ZLAT√ù Odkaz (Trval√© Ulo≈æenie)
                </button>
                <button id="saveFree" class="ghost">
                    Ulo≈æi≈• ZADARMO (Iba 48 hod√≠n)
                </button>
            </div>
          </div>
          <div class="small" style="margin-top:10px; color:var(--muted);">
            Platen√© odkazy s√∫ nav≈ædy v na≈°ej Kapsule ƒåasu. Po 48 hodin√°ch sa neplaten√© odkazy simulovane vyma≈æ√∫.
          </div>


          <div style="margin-top:20px">
            <label id="labelSearch">Hƒæada≈• a triedi≈• odkazy</label>
            <div style="display:flex;gap:8px;margin-top:8px">
              <input id="search" type="text" placeholder="">
              <select id="sort">
                <option value="paid">ZLAT√â Odkazy najprv</option>
                <option value="new">Najnov≈°ie</option>
                <option value="likes">Najviac lajkovan√©</option>
                <option value="views">Najviac ƒç√≠tan√©</option>
                <option value="old">Najstar≈°ie</option>
                <option value="random">N√°hodn√©</option>
              </select>
            </div>
          </div>
        </div>

        <div class="card" style="margin-top:12px">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <h3 id="listTitle">Zoznam odkazov</h3>
            <div class="small" id="count">0 odkazov</div>
          </div>
          <div id="list" class="list" style="margin-top:10px">
            <div class="small">≈Ωiadne odkazy</div>
          </div>
        </div>
      </main>

      <aside>
        <div class="card">
          <h3 id="statsTitle">≈†tatistiky Kapsuly ƒåasu</h3>
          <div class="small" style="margin-top:8px">Celkom odkazov: <strong id="statTotal">0</strong></div>
          <div class="small">Trvalo ulo≈æen√Ωch (ZLAT√ùCH): <strong id="statPaid" style="color:var(--gold);font-weight:700">0</strong></div>
          <div class="small">Doƒçasn√Ωch odkazov (vypr≈°√≠): <strong id="statTemporary" style="color:var(--danger);font-weight:700">0</strong></div>
          <div class="small">Celkom zobrazen√≠: <strong id="statViews">0</strong></div>
          <div class="small">Celkom lajkov: <strong id="statLikes">0</strong></div>
        </div>

        <div class="card" style="margin-top:12px">
          <h3 id="topTitle">Najpopul√°rnej≈°ie odkazy</h3>
          <div id="topList" style="display:flex;flex-direction:column;gap:8px;margin-top:8px"></div>
        </div>

        <div class="card" style="margin-top:12px">
          <h3 id="helpTitle">Ako funguje Trv√°cnos≈•?</h3>
          <div class="small" id="helpText">
            Ka≈æd√Ω odkaz m√° unik√°tnu Hodnos≈• (#). <br>
            <strong style="color:var(--danger)">Zadarmo odkaz</strong> m√° platnos≈• len 48 hod√≠n. Ak nezaplat√≠≈° 1 ‚Ç¨, Tvoj odkaz sa vyma≈æe a Tvoja **Hodnos≈• prepadne**.
            <br><br>
            <strong style="color:var(--gold)">Zlat√Ω odkaz (1‚Ç¨)</strong> sa stane trvalou s√∫ƒças≈•ou Kapsuly ƒåasu a zachov√° si Tvoju unik√°tnu Hodnos≈• nav≈ædy.
          </div>
        </div>
      </aside>
    </div>

    <footer>¬© 2025 Odkaz pre ƒæudstvo ‚Äî Verzia 5.0 | <a href="#" style="color:var(--muted)">Kontakt / Ochrana d√°t</a></footer>

  </div>

  <div class="sticky-cta" id="stickyCta">
    <div class="cta-text" id="ctaText">
      Nenechaj svoj odkaz VYMAZA≈§! Zapla≈• 1‚Ç¨ a ulo≈æ ho NATRVALO.
    </div>
    <button id="stickyPayBtn" class="btn">
      UROB ODKAZ TRVAL√ù (1‚Ç¨)
    </button>
  </div>

<script>
/* -----------------------
   Kon≈°tanty a I18N (prevzat√© z V4.0)
   ----------------------- */
const TEMP_DURATION_MS = 48 * 60 * 60 * 1000;
const DELETE_INTERVAL_MS = 60 * 60 * 1000;

const I18N = {
  sk: {
    title: 'Odkaz pre ƒæudstvo',
    subtitle: 'Digit√°lna Kapsula ƒåasu v. 5.0',
    formTitle: 'Prida≈• odkaz a zvoli≈• trv√°cnos≈•',
    labelName: 'Meno / Prez√Ωvka (voliteƒæn√©)',
    labelMessage: 'Odkaz (max 300 znakov)',
    labelSearch: 'Hƒæada≈• a triedi≈• odkazy',
    listTitle: 'Zoznam odkazov',
    statsTitle: '≈†tatistiky Kapsuly ƒåasu',
    topTitle: 'Najpopul√°rnej≈°ie odkazy',
    payLinkText: 'üîí ZAPLA≈§ 1‚Ç¨ ‚Äî ZLAT√ù Odkaz (Trval√© Ulo≈æenie)',
    saveFree: 'Ulo≈æi≈• ZADARMO (Iba 48 hod√≠n)',
    placeholderMsg: 'Nap√≠≈° vetu pre bud√∫ce gener√°cie...',
    paidTag: 'ZLAT√ù üåü',
    temporaryTag: (time) => `Vypr≈°√≠ za ${time}`,
    anonymous: 'Anonym',
    noResults: '≈Ωiadne v√Ωsledky',
    alertMessage: 'Nap√≠≈° odkaz.',
    alertMaxChars: 'Max 300 znakov.',
    alertThanks: 'ƒéakujeme! Odkaz pridan√Ω.',
    alertPaidSim: 'Po dokonƒçen√≠ platby stlaƒç OK a Tvoj odkaz oznaƒç√≠me ako ZLAT√ù (simul√°cia).',
    alertPayError: 'PAYMENT LINK nebol nastaven√Ω. Simulova≈• platen√∫ verziu? (OK = platen√©, Cancel = zadarmo)',
    rank: 'Hodnos≈•',
    shareText: 'Zdieƒæa≈•',
    ctaStickyText: 'Nenechaj svoj odkaz VYMAZA≈§! Zapla≈• 1‚Ç¨ a ulo≈æ ho NATRVALO.',
    ctaStickyBtn: 'UROB ODKAZ TRVAL√ù (1‚Ç¨)'
  },
  en: {
    title: 'Message to Humanity',
    subtitle: 'Digital Time Capsule v. 5.0',
    formTitle: 'Add a message and choose permanence',
    labelName: 'Name / Nickname (optional)',
    labelMessage: 'Message (max 300 chars)',
    labelSearch: 'Search and sort messages',
    listTitle: 'Messages List',
    statsTitle: 'Time Capsule Statistics',
    topTitle: 'Top Messages',
    payLinkText: 'üîí PAY ‚Ç¨1 ‚Äî GOLD Message (Permanent Storage)',
    saveFree: 'Save FOR FREE (Only 48 hours)',
    placeholderMsg: 'Write a message for future generations...',
    paidTag: 'GOLD üåü',
    temporaryTag: (time) => `Expires in ${time}`,
    anonymous: 'Anonymous',
    noResults: 'No results',
    alertMessage: 'Enter a message.',
    alertMaxChars: 'Max 300 characters.',
    alertThanks: 'Thanks! Message added.',
    alertPaidSim: 'After payment, press OK to mark your message as GOLD (sim.).',
    alertPayError: 'PAYMENT LINK not set. Simulate paid version? (OK = paid, Cancel = free)',
    rank: 'Rank',
    shareText: 'Share',
    ctaStickyText: 'Don\'t let your message be DELETED! Pay ‚Ç¨1 and save it PERMANENTLY.',
    ctaStickyBtn: 'MAKE MESSAGE PERMANENT (‚Ç¨1)'
  },
  de: {
    title: 'Botschaft an die Menschheit',
    subtitle: 'Digitale Zeitkapsel v. 5.0',
    formTitle: 'Nachricht hinzuf√ºgen und Dauer w√§hlen',
    labelName: 'Name / Spitzname (optional)',
    labelMessage: 'Nachricht (max 300 Zeichen)',
    labelSearch: 'Suchen und sortieren',
    listTitle: 'Nachrichten Liste',
    statsTitle: 'Statistiken',
    topTitle: 'Top-Nachrichten',
    payLinkText: 'üîí ZAHLEN 1‚Ç¨ ‚Äî GOLD Nachricht (Dauerhaft)',
    saveFree: 'Kostenlos speichern (Nur 48 Stunden)',
    placeholderMsg: 'Schreibe eine Nachricht f√ºr zuk√ºnftige Generationen...',
    paidTag: 'GOLD üåü',
    temporaryTag: (time) => `L√§uft in ${time} ab`,
    anonymous: 'Anonym',
    noResults: 'Keine Ergebnisse',
    alertMessage: 'Gib eine Nachricht ein.',
    alertMaxChars: 'Max 300 Zeichen.',
    alertThanks: 'Danke! Nachricht hinzugef√ºgt.',
    alertPaidSim: 'Nach der Zahlung OK dr√ºcken um als GOLD zu markieren (sim.).',
    alertPayError: 'PAYMENT LINK nicht konfiguriert. Bezahlen simulieren? (OK = bezahlt, Cancel = kostenlos)',
    rank: 'Rang',
    shareText: 'Teilen',
    ctaStickyText: 'Lassen Sie Ihre Nachricht NICHT L√ñSCHEN! Zahlen Sie 1‚Ç¨ f√ºr DAUERHAFTE Speicherung.',
    ctaStickyBtn: 'NACHRICHT DAUERHAFT MACHEN (1‚Ç¨)'
  }
};

/* -----------------------
   Storage & data model (prevzat√© z V4.0)
   ----------------------- */
const STORAGE_KEY = 'odkaz_pre_ludstvo_v5';
let entries = loadEntries();

/* -----------------------
   Helpers & DOM refs (Pridan√© CTA prvky)
   ----------------------- */
const el = id => document.getElementById(id);
const langBtns = document.querySelectorAll('.lang-btn');

const authorEl = el('author');
const messageEl = el('message');
const payLinkBtn = el('payLinkBtn');
const saveFree = el('saveFree');
const listEl = el('list');
const statTotal = el('statTotal');
const statPaid = el('statPaid');
const statTemporary = el('statTemporary');
const statViews = el('statViews');
const statLikes = el('statLikes');
const topList = el('topList');
const charCountEl = el('charCount');

// NOV√â CTA PRVKY
const stickyCtaEl = el('stickyCta');
const stickyPayBtn = el('stickyPayBtn');
const ctaTextEl = el('ctaText');

let LANG = localStorage.getItem('op_lang') || 'sk';
applyLang(LANG);

/* -----------------------
   Utils (prevzat√© z V4.0)
   ----------------------- */
function uid(prefix='id'){ return prefix + Math.random().toString(36).slice(2,10); }
function now(){ return Date.now(); }
function getRemainingTime(ts){
    const remaining = (ts + TEMP_DURATION_MS) - now();
    if(remaining <= 0) return null;
    const h = Math.floor(remaining / (1000 * 60 * 60));
    const m = Math.floor((remaining % (1000 * 60 * 60)) / (1000 * 60));
    if(h > 0) return `${h}h ${m}m`;
    return `${m}m`;
}
function formatDate(ts){ return new Date(ts).toLocaleDateString(LANG, {year:'numeric',month:'short',day:'numeric'}); }
function escapeHtml(s){ return String(s).replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'})[c]); }
function truncate(s,n){ return s.length>n ? s.slice(0,n-1)+'‚Ä¶' : s; }


/* -----------------------
   Perzistencia (prevzat√© z V4.0)
   ----------------------- */
function loadEntries(){
  try{
    const raw = localStorage.getItem(STORAGE_KEY);
    let loaded = raw ? JSON.parse(raw) : [];
    const filtered = loaded.filter(e => e.paid || (e.ts + TEMP_DURATION_MS > now()));
    if(filtered.length !== loaded.length) {
        entries = filtered;
        saveEntries();
    }
    return filtered;
  }catch(e){ console.error(e); return []; }
}
function saveEntries(){ localStorage.setItem(STORAGE_KEY, JSON.stringify(entries)); }
setInterval(loadEntries, DELETE_INTERVAL_MS);


/* -----------------------
   i18n & UI (Aktualiz√°cia CTA textov)
   ----------------------- */
function applyLang(lang){
  LANG = lang;
  localStorage.setItem('op_lang', lang);
  const T = I18N[lang];
  // ... (aktualiz√°cia v≈°etk√Ωch textov) ...
  el('title').textContent = T.title;
  el('listTitle').textContent = T.listTitle;
  payLinkBtn.textContent = T.payLinkText;
  saveFree.textContent = T.saveFree;
  stickyPayBtn.textContent = T.ctaStickyBtn; // NOV√â
  ctaTextEl.textContent = T.ctaStickyText; // NOV√â

  // ... (ostatn√©)
  langBtns.forEach(b=>b.classList.toggle('active', b.dataset.lang===lang));
  render();
}
langBtns.forEach(b=> b.addEventListener('click', ()=> applyLang(b.dataset.lang)));
messageEl.addEventListener('input', ()=> charCountEl.textContent = `${messageEl.value.length}/300`);


/* -----------------------
   Render & UI (prevzat√© z V4.0)
   ----------------------- */
function render(){
  const T = I18N[LANG];
  // filter & sort (implement√°cia by bola rovnak√° ako v V4.0)
  // ...
  // filter & sort
  const q = (el('search').value || '').trim().toLowerCase();
  let list = entries.slice();
  list.forEach((e, i) => e.rank = i + 1);
  if(q) list = list.filter(e => (e.text + ' ' + (e.author||'')).toLowerCase().includes(q));
  const s = el('sort').value;
  if(s==='paid') list.sort((a,b)=> (b.paid?1:0) - (a.paid?1:0) || b.ts-a.ts);
  else if(s==='new') list.sort((a,b)=>b.ts-a.ts);
  else if(s==='likes') list.sort((a,b)=>b.likes-a.likes);
  // ... (pokraƒçovanie triedenia) ...

  listEl.innerHTML = '';
  if(list.length===0){
    listEl.innerHTML = `<div class="small">${T.noResults}</div>`;
  } else {
    list.forEach(e=>{
      const isTemporary = !e.paid;
      const remainingTime = isTemporary ? getRemainingTime(e.ts) : null;
      
      const item = document.createElement('div');
      item.className = 'item' + (e.paid ? ' highlight-paid' : '') + (isTemporary ? ' temporary' : '');
      item.dataset.id = e.id;
      item.innerHTML = `
        <div style="display:flex;gap:12px;align-items:flex-start;flex:1">
          <img class="avatar" src="${escapeHtml(e.avatar||'https://picsum.photos/56?random='+Math.floor(Math.random()*1000))}" alt="avatar"/>
          <div style="flex:1">
            <div style="display:flex;align-items:center;gap:8px">
              <div style="font-weight:700">${escapeHtml(e.author||T.anonymous)}</div>
              <div class="meta">${formatDate(e.ts)}</div>
              <span class="meta" style="color:var(--accent2); font-weight:700;">#${e.rank}</span>
              ${e.paid?`<span class="tag-paid">${T.paidTag}</span>`:''}
              ${isTemporary?`<span class="time-limit">${T.temporaryTag(remainingTime || '0m')}</span>`:''}
            </div>
            <div style="margin-top:8px;font-size:15px">${escapeHtml(e.text)}</div>
            <div style="margin-top:8px" class="meta">
              <span data-id="${e.id}" data-action="like" style="cursor:pointer;margin-right:8px">‚ù§ ${e.likes}</span>
              <span>Views: ${e.views}</span>
              <button data-id="${e.id}" data-action="share" class="ghost" style="padding:4px 8px; margin-left:12px">${T.shareText}</button>
            </div>
          </div>
        </div>
      `;
      listEl.appendChild(item);
      e.views = (e.views||0) + 1;
    });
    saveEntries();
  }

  // AKTUALIZ√ÅCIA ≈†TATIST√çK (rovnak√° ako V4.0)
  const paidCount = entries.filter(e=>e.paid).length;
  const tempCount = entries.filter(e=>!e.paid).length;
  statTotal.textContent = entries.length;
  statPaid.textContent = paidCount;
  statTemporary.textContent = tempCount;
  statViews.textContent = entries.reduce((s,e)=>s+e.views,0);
  statLikes.textContent = entries.reduce((s,e)=>s+e.likes,0);
  el('count').textContent = list.length + ' ' + (LANG==='sk'?'odkazov':'messages');

  // TOP LIST (rovnak√° ako V4.0)
  const top = entries.slice().sort((a,b)=>b.likes-a.likes).slice(0,5);
  topList.innerHTML = '';
  if(top.length===0) topList.innerHTML = '<div class="small">‚Äî</div>'
  else top.forEach(t=>{
    const d = document.createElement('div'); d.className='small';
    d.innerHTML = `<strong>#${t.rank} ${escapeHtml(t.author||T.anonymous)}</strong>: ${escapeHtml(truncate(t.text,60))} ‚Äî <span style="font-weight:700;color:white">‚ù§ ${t.likes}</span>`;
    topList.appendChild(d);
  });
}

/* -----------------------
   Actions & Payment (prevzat√© z V4.0)
   ----------------------- */
function addEntrySimulatedPayment(asPaid){
  // ... (logika pridania nov√©ho odkazu)
  const author = authorEl.value.trim() || null;
  const text = messageEl.value.trim();

  if(!text) return alert(I18N[LANG].alertMessage);
  if(text.length>300) return alert(I18N[LANG].alertMaxChars);

  const entry = {
    id: uid('o_'),
    author,
    text,
    ts: now(),
    likes: 0,
    views: 0,
    paid: Boolean(asPaid),
    avatar: 'https://picsum.photos/56?random=' + Math.floor(Math.random()*10000)
  };
  entries.unshift(entry);
  saveEntries(); render();
  authorEl.value=''; messageEl.value='';
  alert(I18N[LANG].alertThanks + (asPaid ? ' ZLAT√ù ODKAZ je trvalo ulo≈æen√Ω.' : ' Doƒçasn√Ω odkaz bude akt√≠vny 48 hod√≠n.'));
}

const PAYMENT_LINK = '';
function handlePaymentAction(asPaid){
  const T = I18N[LANG];
  if(!PAYMENT_LINK){
    if(confirm(T.alertPayError)){
      addEntrySimulatedPayment(true);
    } else {
      addEntrySimulatedPayment(false);
    }
    return;
  }
  window.open(PAYMENT_LINK, '_blank');
  if(confirm(T.alertPaidSim)){
    addEntrySimulatedPayment(true);
  } else {
    addEntrySimulatedPayment(false);
  }
}

// Bindovanie na CTA tlaƒçidl√°
payLinkBtn.addEventListener('click', ()=> handlePaymentAction(true));
saveFree.addEventListener('click', ()=> addEntrySimulatedPayment(false));
stickyPayBtn.addEventListener('click', ()=> handlePaymentAction(true)); // Nov√© sticky tlaƒçidlo


/* -----------------------
   Init
   ----------------------- */
render();
setInterval(render, 10000); // Periodick√© prekresƒæovanie
</script>
</body>
</html>
